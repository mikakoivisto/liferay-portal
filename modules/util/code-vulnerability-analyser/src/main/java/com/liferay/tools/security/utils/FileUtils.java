package com.liferay.tools.security.utils;

import java.io.File;
import java.io.FileFilter;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;

public class FileUtils {

	public static List<File> getFiles(List<File> dirs, FilenameFilter filter) {
		
		List<File> inScopeFiles = new LinkedList<File>();
		
		for (File dir : dirs) {
			
			File[] scanFiles = dir.listFiles(filter);
			inScopeFiles.addAll(Arrays.asList(scanFiles));
		}
		
		return inScopeFiles;
	}
	
	public static List<File> getSubdirs(File file) {
		
	    List<File> subdirs = Arrays.asList(file.listFiles(new FileFilter() {
	        public boolean accept(File f) {
	            return f.isDirectory();
	        }
	    }));
	    subdirs = new ArrayList<File>(subdirs);

	    List<File> deepSubdirs = new ArrayList<File>();
	    for(File subdir : subdirs) {
	        deepSubdirs.addAll(getSubdirs(subdir)); 
	    }
	    subdirs.addAll(deepSubdirs);
	    return subdirs;
	}
}
