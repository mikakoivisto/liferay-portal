package com.liferay.tools.security;

import java.io.File;
import java.util.LinkedList;
import java.util.List;

import org.slf4j.LoggerFactory;

import com.github.javaparser.ast.body.ClassOrInterfaceDeclaration;
import com.github.javaparser.ast.visitor.VoidVisitorAdapter;
import com.liferay.tools.security.utils.LiferayFileUtils;

public class VisitorFactory {

	public static List<LiferayCodeVisitor> getVisitors(File file) {
		
		_log.info("Creating appropriate visitors for " + file.getName());
		
		List<LiferayCodeVisitor> visitors = new LinkedList<LiferayCodeVisitor>();
		
		if (LiferayFileUtils.isRemoteServiceImpl(file)) {
			visitors.add(new RemoteServiceVisitor());
		}
		
		return visitors;
	}
	
	public static List<LiferayCodeVisitor> getVisitors(ClassOrInterfaceDeclaration def) {
		
		_log.info("Creating appropriate visitors for " + def.getName());
		
		List<LiferayCodeVisitor> visitors = new LinkedList<LiferayCodeVisitor>();
		
		if (LiferayFileUtils.isRemoteServiceImpl(def)) {
			visitors.add(new RemoteServiceVisitor());
		}
		
		return visitors;
	}
	
	private final static org.slf4j.Logger _log = LoggerFactory.getLogger(VisitorFactory.class);
}
